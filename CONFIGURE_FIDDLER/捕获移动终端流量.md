# 捕获移动终端流量

与捕获浏览器流量思路相同，就是需要将流量流向Fiddler，移动设置也属于远程设备的一种，所以上一章节的Fiddler的配置同样要修改，这个章节主要是介绍移动设备开启网络代理的步骤。


因条件限制，这里只叙述Android端如何开启网络代理

# Android开启网络代理
代理的前提条件是需要终端和代理服务器处在同一个网络中
1. 接入同一个wifi
2. 代理服务器开热点
3. ....

教程中使用夜神模拟器开启一个Android的模拟器，采用桥接模式，使得模拟器和代理服务器（本机）在同一个网络中。因各终端型号不同，界面存在差异，但功能都是大同小异

```
1、打开终端的"设置"页面
2、打开手机的"WLAN"页面，即wifi连接页面
3、选择当前连接的wifi，找到代理配置功能
4、手动代理，然后配置代理服务器的ip和端口
5、点击保存
```

出现如图所示的界面，表示已经拦截到了流量，说明代理配置成功。但是所有的流量又变成了加密状态，这是因为移动终端未安装证书，无法解密，接下来给移动端安装证书
```
1、在代理服务器的浏览器中访问“127.0.0.1:8888”
2、在页面上下载Fiddler证书
3、将下载的证书发送到终端，保存到终端
```

![Fiddler响应页面](https://tva4.sinaimg.cn/large/0082ZISugy1gazlqc58vlj30qf0fcdij.jpg)

```
1、打开终端的"设置"页面
2、打开手机的“安全”页面，找到凭据存储功能
```

![终端安全页面](https://tvax1.sinaimg.cn/large/0082ZISugy1gazllxjssxj30fi0rjmyb.jpg)

```
3、选择“从SD卡安装”

```

![移动端安装证书](https://tva1.sinaimg.cn/large/0082ZISugy1gazluh1y4vj30fc0r7q3s.jpg)

安装成功后，再次打开Fiddler，可以看到HTTPS流量了

![移动端流量](https://tvax4.sinaimg.cn/large/0082ZISugy1gazlyaa0egj30cf0d0ad1.jpg)

到这里，配置以Fiddler捕获终端设备流量已经成功了，这里是采用了对整个网络进行代理，有些APP本身提供了代理功能，可以对单个软件的流量进行代理
